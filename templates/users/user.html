{% extends '_base.html' %}

{% block content %}
    <div class="container bg-dark p-4 rounded">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane"
                        type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="true">Profile
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="devices-tab" data-bs-toggle="tab" data-bs-target="#devices-tab-pane"
                        type="button" role="tab" aria-controls="devices-tab-pane" aria-selected="false">Devices
                </button>
            </li>
        </ul>
        <div class="tab-content p-2" id="myTabContent">
            <div class="tab-pane fade p-2 show active" id="profile-tab-pane" role="tabpanel"
                 aria-labelledby="profile-tab" tabindex="0">
                <div class="container">
                    <form class="form" action="">
                        <div class="mb-3">
                            <label for="" class="form-label">User name</label>
                            <input type="text" class="form-control bg-dark" disabled value="{{ user.name }}">
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">User display name</label>
                            <input type="text" class="form-control bg-dark" value="{{ user.display_name }}">
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Created at</label>
                            <input type="text" class="form-control bg-dark" value="{{ user.created_at }}" disabled>
                        </div>
                        <div class="mb-3">
                            <input type="checkbox" class="btn-check" id="btn-check-2-outlined" autocomplete="off">
                            <label class="btn btn-outline-secondary" for="btn-check-2-outlined">IS DEACTIVATED</label>
                        </div>
                        <div class="mb-3">
                            <input type="checkbox" class="btn-check" id="btn-check-2-outlined" autocomplete="off">
                            <label class="btn btn-outline-secondary" for="btn-check-2-outlined">IS ADMIN</label>
                        </div>
                        <div class="mb-3">
                            <input type="submit" class="form-control bg-dark" value="Save">
                        </div>
                    </form>
                </div>
{#                <div class="container"><img src="{{ user.avatar_url|default:'https://cdn3.emoji.gg/emojis/2935-cold-doge.png' }}"#}
{#                          alt="{{ user.name }}" style="object-fit: cover;" width="200px" height="200px" class="rounded">#}
                </div>
            </div>
            <div class="tab-pane fade" id="devices-tab-pane" role="tabpanel" aria-labelledby="devices-tab"
                 tabindex="0">
                <div class="container table-responsive">
                    <table class="table table-dark">
                        <tr>
                            <th>ID</th>
                            <th>NAME</th>
                            <th>USER AGENT</th>
                            <th>LAST SEEN AT</th>
                            <th>LAST SEEN IP</th>
                        </tr>
                        {% for device in user.devices %}
                            <tr>
                                <th>{{ device.id }}</th>
                                <td>{{ device.name }}</td>
                                <td>{{ device.user_agent }}</td>
                                <td>{{ device.last_seen_ts }}</td>
                                <td>{{ device.last_seen_ip }} - {{ user.last_seen_device.country_by_ip }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}